# 📖 FlowNote MVP 사용자 가이드

> **FlowNote**로 PDF 문서를 검색하고 인사이트를 얻는 방법을 안내합니다.

---

## 1. 📑 목차

1. [시작하기](#시작하기)
2. [기본 사용법](#기본-사용법)
3. [고급 기능](#고급-기능)
4. [문제 해결](#문제-해결)
5. [팁 & 트릭](#팁--트릭)

---

## 2. 🚀 시작하기

### 1) 환경 요구사항

- **Python**: 3.8 이상
- **운영체제**: Windows, macOS, Linux
- **필수 라이브러리**: [**`requirements.txt`**](/requirements.txt) 참조

<br>

### 2) 설치 및 실행

* **➀ 1단계: 저장소 클론**
```bash

    git clone https://github.com/jjaayy2222/flownote-mvp.git
    cd flownote-mvp

```

* **➁ 2단계: 가상환경 설정 및 활성화**
```bash

    # 가상환경 생성
    # Windows: python -m venv myenv
    # mac: pyenv virtualenv 3.11.10 <원하는 가상환경명> 
    pyenv virtualenv 3.11.10 myenv 

    # 가상환경 활성화
    # Windows: myenv\Scripts\activate
    # mac: pyenv activate <생성한 가상환경명>
    pyenv activate myenv      

```

* **➂ 3단계: 패키지 설치**
```bash

    pip install -r requirements.txt

```

* **➃ 4단계: 환경 변수 설정**
  - 프로젝트 루트에 `.env` 파일 생성
  - 다음 내용 추가:
```plaintext 

    OPENAI_API_KEY=your_api_key_here

```

* **➄ 5단계: 앱 실행**
```bash

    streamlit run app.py

```

* **➅ 6단계: 브라우저에서 확인**
  * 자동으로 브라우저가 열립니다 (`http://localhost:8501`)
  * 열리지 않으면 터미널의 URL을 직접 복사하여 접속하세요

---

<br>

## 3. 📚 기본 사용법

### 1) 파일 업로드

* **단계별 안내:**

  * **`➀` `main`에서 `upload` 버튼에서 `파일` 선택**
    * **`📂파일 업로드`** 섹션으로 이동
    * **`Browse files`** 버튼 클릭

  * **`➁ `파일 선택**
   * 컴퓨터에서 `PDF`, `TXT` 파일 선택
   
  * **`➂` 자동 처리 확인**
    * 업로드 즉시 자동 처리 시작

    * 진행 상황이 화면에 표시됩니다:

      * ✅ 파일 로드 중...

      * ✅ 텍스트 청킹 중...

      * ✅ 임베딩 생성 중...

      * ✅ FAISS 인덱스 저장 중...

* **처리 결과 확인**

     * **`청크 수`, `토큰 수`, `예상 비용` 표시**

     * **`메타데이터` 자동 기록**

* **지원 파일:**
  * `PDF`, `TXT` 파일 지원
  *  파일 크기 제한: 없음 (단, 메모리 고려)
  *  한글, 영어, 다국어 지원

---

### 2) 문서 검색

* **단계별 안내:**

  * **`➀` 검색어 입력**

    * 메인 화면의 **`🔍 검색어를 입력하세요`** 필드에 질문 입력

    * 예시: *`업로드한 문서에 관련된 내용으로 입력하기`*

      * *`프로젝트 목표는 무엇인가요?`*

      * *`주요 결과를 요약해주세요`*

      * *`예산은 얼마인가요?`*

  * **`➁` 검색 옵션 선택**

    * **상위 K개 결과**: 반환할 결과 수 *(기본값 = 3)*

    * `main` 검색어 입력 아래 `슬라이드바`에서 조정 가능

  * **`➂` 검색 결과 확인**

     * **상위 결과**: 가장 관련성 높은 내용 표시

     * **유사도 점수**: 각 결과의 관련성 점수

     * **원본 데이터 정보**: 실제 원본 데이터 출력

* **검색 예시:**

```markdown

        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        질문: OpenAI 프록시 서비스
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

        결과:
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        📄 결과 1위 (유사도: 0.5799)
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

        기존 OpenAI 호환 애플리케이션과의 원활한 통합을 가능하게 하면서 
        사용자 정의 라우팅, 속도 제한 캐싱 또는 비용 최적화와 같은 추가 기능을 제공할 수 있습니다.

        프록시는 OpenAI API 사양과의 호환성을 유지하며, 스트리밍 응답, 구조화된 출력 파싱 
        및 openai/gpt-4o-mini 모델을 포함한 표준 매개변수를 지원합니다.

        기능
        ✅ OpenAI API 호환성

        ✅ 스트리밍 및 비스트리밍 응답

        ✅ Pydantic을 사용한 구조화된 출력 파싱 

        ...(중략)
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

```

---

### 3) 결과 확인 및 활용

* **결과 화면 구성:**

  * **검색 결과 카드**
    * 각 결과가 별도 카드로 표시
    * 유사도 점수로 정렬
   
  * **메타데이터**: *`사이드바` → `파일 통계`*
    * 총 파일
    * 총 용량
    * 총 청크
    * *(사용한)* 모델 수
   
  * **원문 보기**
    * `검색` 버튼 클릭 → `처리` 과정 → 유사도 순으로 정렬 → **`유사도 점수`, `원문 텍스트`**
   - 원문 컨텍스트 일부 확인 가능

---

<br>

## 4. 🎯 고급 기능

### 1) 🕐 검색 히스토리

* **기능 설명:**
  * 모든 검색 기록 자동 저장
  * 이전 검색 결과 빠르게 재확인

* **사용 방법:**

  * **`➀` 히스토리 확인**
    * `main` **`🕐 검색 히스토리`** 섹션 열기
    * 최근 10개 검색 기록 표시됨

  * **`➁` 히스토리 관리**
    * 자동 저장 → 수동 삭제 불가
    * 최신 순 정렬

* **히스토리 예시:**

    ```markdown

    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    📊 검색 히스토리
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        🔍 마이그레이션 (결과: 3개)                                                   🔼

    시간: 2025-10-27 13:24:23
    상위 결과:
    1. env("OPENAI_API_KEY")
    )

    # OpenAI에서 마이그레이션
    공식 OpenAI API에서 이 프록시로 마이그레이션하려면:

     1. base_url 매개변수...
     2. 만 지원합니다. 모든 요청은 API 호출에서 "model": "openai/gpt-4o-mini"를 지정해야 합니다.
    
     환경 변수 설정
     프로덕션 사용을 위해 자격 증명을 환경 ...

     3. 분당 요청 수
      * 분당 토큰 수
      * 동시 요청 수
    
    # 지원되는 모델
    
    프록시는 현재 openai/gpt-4o-mini 모델만 지원합니다. 모든 요청은 API 호출에서 ...

    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    
        🔍 OpenAI API 프록시 서비스 (결과: 3개)                                      🔽
        🔍 OpenAI (결과: 3개)                                                    🔽
        🔍 FlowNote 사용법 (결과: 5개)                                             🔽
        🔍 임베딩이란 (결과: 8개)                                                   🔽
        🔍 FlowNote 사용법 (결과: 5개)                                             🔽
        🔍 임베딩 (결과: 0개)                                                      🔽
        🔍 쿼리 (결과: 0개)                                                       🔽
        🔍 모델 (결과: 0개)                                                       🔽
        🔍 청크란? (결과: 0개)                                                     🔽
    
    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    ```

---

### 2) 📊 메타데이터 확인

* **`➀` 기능 설명:**
  * 업로드된 파일의 `상세 정보` 확인
  * `처리 통계` 및 `비용` 정보

* **`➁` 확인 방법:**

  * **사이드바 통계**
    * **`📊 파일 통계`** 섹션 확인
    * `총 파일`, `총 용량`, `총 청크`, `모델 수`

  * **파일 목록**
    * **`📄 파일 목록`** 섹션 확인
    * 각 파일의 상세 정보:
      * 파일명
      * 크기
      * 청크 수
      * 임베딩 모델
      * 업로드 *(시간)*

  * **통계 예시:**

```markdown

        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        📊 파일 통계
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        ✅ 파일: 8개
        ✅ 총 용량: 6.29MB
        ✅ 총 청크: 498개
        ✅ 모델 수: 2개
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

        📄 파일 목록
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        **`📄 gpt=4o-mini.md`       🔼** 
        - 크기: 0.07MB
        - 청크: 163개
        - 모델: text-embedding-3-small
        - 업로드: 2025-10-27 13:19:02

        ---------------------------------
        📄 gpt=4o.md                  🔽
        ---------------------------------
        📄 gpt=4o-mini.md             🔽
        ---------------------------------
        📄 test_document.txt          🔽
        ---------------------------------
        📄 large_document.txt         🔽
        ---------------------------------
        📄 test_documetn.txt          🔽
        ---------------------------------
        📄 large_document.txt         🔽
        ---------------------------------
        📄 test_documetn.txt          🔽
        ---------------------------------
        📄 large_document.txt         🔽
        ---------------------------------

        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

```

---

<br>

## 5.🔧 문제 해결

### 1) ❌ 자주 발생하는 오류

#### **`➀` `OPENAI_API_KEY not found` 오류**

* **원인:**
  * `.env` 파일 누락
  * 환경 변수 설정 오류

* **해결 방법:**
```bash

    # .env 파일 생성
    echo "OPENAI_API_KEY=your_key_here" > .env

    # 앱 재시작
    streamlit run app.py

```

---

#### **`➁` `FAISS index not found` 오류**

* **원인:**
  * 파일을 업로드하지 않음
  * 인덱스 파일이 삭제됨

* **해결 방법:**
  * `PDF` 파일을 다시 업로드
  * 자동 처리 완료 대기
  * 검색 재시도

---

#### **`➂` 파일 업로드 실패**

* **원인:**
  * 파일 형식 불일치 (`PDF`, `TXT`가 아님)
  * 파일 손상
  * 메모리 부족

* **해결 방법:**
  
  * **파일 형식 확인하기**
    * `PDF`, `TXT` 파일만 지원
    * 파일 확장자: `.pdf`, `.txt`

  * **파일 크기 확인**
    * 너무 큰 파일은 분할 업로드
    * 권장: 10MB 이하

  * **파일 무결성 확인**
    * 다른 로더 (*예시: `PDF` 뷰어*)에서 열어보기
    * 손상된 경우 복구 or 재생성

---

#### **`➃` 검색 결과 없음**

* **원인:**
  * 검색어와 문서 내용 불일치
  * 너무 구체적인 검색어
  * 파일 처리 미완료

* **해결 방법:**
  * **검색어 조정**
    * 더 일반적인 키워드 사용
    * 여러 키워드 조합

  * **파일 확인**
    * 올바른 파일이 업로드되었는지 확인
    * 파일 목록에서 확인

  * **K 값 증가**
    * 상위 K개 결과를 더 많이 요청 *(예: 5~10개)*

---

### 2) 💡 성능 최적화 팁

* **`➀` 파일 전처리**
  * 불필요한 페이지 제거
  * 텍스트 품질 확인
  * 이미지는 OCR 처리

* **`➁` 검색 최적화**
  * 명확한 키워드 사용
  * 너무 긴 질문 피하기
  * 핵심 단어 포함

* **`➂` 리소스 관리**
  * 불필요한 파일 삭제
  * 주기적으로 캐시 정리
  * 메모리 사용량 모니터링

---

<br>

## 6. 💡 팁 & 트릭

### 1) 🎯 효율적인 검색법

* **`➀` 키워드 활용**

  ```markdown

    ❌ 나쁜 예: "이 프로젝트에서 우리가 달성하고자 하는 목표가 무엇인지 자세히 알려주세요"
    ✅ 좋은 예: "프로젝트 목표"

  ```

* **`➁` 구체적 질문**

  ```markdown

    ❌ 나쁜 예: "좋은 내용"
    ✅ 좋은 예: "사용자 만족도 결과"

  ```

* **`➂` 복합 검색**

  ```markdown

    ✅ 첫 검색: "예산 총액"
    ✅ 추가 검색: "예산 집행률"
    ✅ 심화 검색: "예산 절감 방안"

  ```

---

### 2) 📂 파일 관리 팁

* **`➀` 파일명 규칙**
  * 명확한 이름 사용
  * 날짜 포함 (예: `2025-10-project-report.pdf`)
  * 버전 표시 (예: `budget_v2.pdf`)

* **`➁` 파일 분류**
  * 주제별로 폴더 구분
  * 관련 파일 함께 업로드
  * 정기적으로 정리

* **`➂` 백업**
  * 원본 파일 보관
  * 클라우드 백업
  * 버전 관리

---

### 3) 🔍 앞으로의 검색 히스토리 활용 가능성

* **`➀` 패턴 분석**
  * 자주 검색하는 키워드 파악
  * 검색 패턴 최적화
  * 자주 쓰는 질문 메모

* **`➁` 재활용**
  * 비슷한 질문은 히스토리에서 선택
  * 이전 검색 결과 참조
  * 검색 효율 향상

---

### 4)⚡ 생산성 향상

* **`➀` 단축키 활용**
  * `Ctrl + Enter`: 검색 실행
  * `Ctrl + R`: 페이지 새로고침
  * `Esc`: 모달 닫기

* **`➁` 워크플로우 활용 가능성**

  ```markdown

    1. 파일 일괄 업로드
    2. 주요 키워드로 탐색
    3. 세부 내용 검색
    4. 결과 복사하여 활용
    5. 보고서 작성

  ```

* **`➂` 통합 활용 가능성**
  * `Notion`에 결과 붙여넣기
  * `Obsidian` 링크 연결
  * 워드/한글 문서에 삽입

---

<br>

## 7. 📞 지원 및 문의

* **`➀` 문제가 해결되지 않나요?**

  * **GitHub Issues**: [이슈 등록](https://github.com/jjaayy2222/flownote-mvp/issues)
  * **Git Message**: [작성자](@jjaayy2222)
  * **문서**: [README.md](README.md) 참조

---

## 8. 🔄 업데이트 내역

### 1) `v1.0` (2025-10-27)
- ✅ 기본 검색 기능
- ✅ 파일 업로드 자동화
- ✅ 검색 히스토리
- ✅ 메타데이터 관리

<br>

### 2) `다음 버전` (v1.1 예정)
- ⏳ FAISS 인덱스 영속화
- ⏳ 마크다운 내보내기 기능
- ⏳ 다중 파일 검색
- ⏳ 고급 필터링
- ⏳ 성능 최적화

---

<br>

## 9. 📚 관련 문서

- [README.md](README.md) - 프로젝트 개요
- [Backend 모듈 설명](docs/) - 개발 문서

---

<br>

>> **FlowNote MVP**를 사용해 주셔서 감사합니다! 🎉

>> 더 나은 검색 경험을 위해 지속적으로 개선하고 있습니다.

>> 피드백은 언제나 환영합니다! 💙

---